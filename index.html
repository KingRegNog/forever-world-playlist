const playlistId = "PLr2GfQUli3msPDzdWGNt7FVKk-5GPmeAL";
const feedUrl = `https://forever-world-rss.kingregnog04.workers.dev?playlist=${playlistId}`;

fetch(feedUrl)
  .then(res => res.text())
  .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
  .then(data => {
    const container = document.getElementById("playlist");
    data.querySelectorAll("entry").forEach(entry => {
      const id = entry.querySelector("yt\\:videoId").textContent;
      const title = entry.querySelector("title").textContent;

      const card = document.createElement("a");
      card.className = "video";
      card.href = `https://youtu.be/${id}`;
      card.target = "_blank";

      card.innerHTML = `
        <div class="thumb">
          <img src="https://img.youtube.com/vi/${id}/hqdefault.jpg" alt="${title}">
          <div class="play">â–¶</div>
        </div>
        <div class="title">${title}</div>
      `;

      container.appendChild(card);
    });
  })
  .catch(err => console.error("Playlist failed to load:", err));
